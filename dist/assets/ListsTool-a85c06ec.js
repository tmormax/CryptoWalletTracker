import{r,u as v,j as e}from"./index-d1e0b476.js";function W(t){return t.startsWith("0x")?t.length===42:!1}function F(){const[t,h]=r.useState(!1),i=v(l=>l.walletList),p=v(l=>l.addListToWallet);r.useEffect(()=>{const l=document.getElementById("create-list-widget-listname");l.value.replace(" ","")===""&&(l.value="NewList")},[]);function s(){const l=document.getElementById("create-list-widget-listname").value.trim(),a=document.getElementById("create-list-widget-addresslist").value.trim().split(`
`).map(f=>f.trim()).filter(f=>f.trim()!="");var L=0;a.map(f=>{!W(f)&&(L+=1)}),L>0?alert("Invalid Address Found!"):i.filter(N=>N.name===l).length>0?alert("List Name Already Exists!"):g(l,a)}function g(l,x){t||(h(!0),fetch("https://cryptowallettracker.onrender.com/api/add-wallets-list",{method:"POST",body:JSON.stringify({listName:l,walletList:x}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(a=>a.json()).then(a=>{alert(a.message),h(!1),a.response!=null&&p({id:a.response.records[0].id,name:a.response.records[0].fields["List Name"],list:a.response.records[0].fields["Holders List"]})}).catch(a=>{console.log(a.message)}))}return e.jsxs("div",{className:"widget-container",children:[e.jsx("h3",{children:"Create New Wallet List"}),e.jsx("h4",{children:"List Name"}),e.jsx("input",{className:"list-widget-input",type:"text",name:"create-list-widget-listname",id:"create-list-widget-listname"}),e.jsx("h4",{children:"Address List"}),e.jsx("textarea",{className:"list-widget-textarea",name:"create-list-widget-addresslist",id:"create-list-widget-addresslist"}),e.jsx("div",{className:"create-list-widget-footer",children:e.jsx("p",{className:"btn",onClick:()=>s(),children:t?"SAVING LIST":"ADD LIST"})})]})}function M(){const t=v(c=>c.walletList),h=v(c=>c.deleteListFromWallet),i=v(c=>c.updateListToWallet),[p,s]=r.useState(t[0].name),[g,l]=r.useState(!1),[x,a]=r.useState(!1),[L,f]=r.useState(!1),[N,y]=r.useState(!1),[b,D]=r.useState(0),[S,I]=r.useState(0),[n,o]=r.useState(0);r.useEffect(()=>{j()},[p]);function d(){return document.getElementById("edit-list-widget-addresslist").value.split(`
`).map(m=>m.trim()).filter(m=>m.trim()!="").length}function j(){t.map(c=>{if(c.name===p){l(!0);const m=document.getElementById("edit-list-widget-addresslist");m.value="",m.value=c.list,D(d),y(!1),l(!1)}})}function w(c){var m="";return t.map(C=>{c===C.name&&(m=C.id)}),m}function E(){a(!0),I(0);const c=w(p);c!=""&&fetch("https://cryptowallettracker.onrender.com/api/delete-list",{method:"POST",body:JSON.stringify({listID:c}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(m=>m.json()).then(m=>{m.hasOwnProperty("deleted")?(h(m.id),s(t[0].name),a(!1),alert("List is Deleted Successfully!")):(a(!1),alert("List is Not Deleted!"))}).catch(m=>{a(!1),console.log(m.message)})}function U(){f(!0),o(0);const c=w(p),C=document.getElementById("edit-list-widget-addresslist").value.trim().split(`
`).map(u=>u.trim()).filter(u=>u.trim()!="");var k=0;if(C.map(u=>{!W(u)&&(k+=1)}),k>0)alert("Invalid Address Found!");else{var T="";C.map((u,A)=>A===0?T+=u:T+=`
`+u),c!=""&&fetch("https://cryptowallettracker.onrender.com/api/update-list",{method:"POST",body:JSON.stringify({listID:c,walletList:T}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(u=>u.json()).then(u=>{u.hasOwnProperty("fields")?(i(u.id,u.fields["Holders List"]),f(!1),alert("List is Updated Successfully!")):(f(!1),alert("List is Not Updated!"))}).catch(u=>{f(!1),console.log(u.message)})}}return e.jsxs("div",{className:"widget-container",children:[e.jsx("h3",{children:"Edit Wallet List"}),e.jsx("h4",{children:"Select List"}),e.jsx(P,{selection:s}),e.jsxs("div",{className:"edit-list-address-header",children:[e.jsx("h4",{children:g?"Fetching List...":"Address List"}),!g&&e.jsxs("h4",{children:["Wallets: ",b]})]}),e.jsx("textarea",{className:"list-widget-textarea",name:"edit-list-widget-addresslist",id:"edit-list-widget-addresslist",onBlur:c=>{D(d)},onChange:()=>y(!0)}),e.jsxs("div",{className:"edit-list-widget-footer",children:[e.jsxs("div",{className:"edit-list-widget-btns",children:[S===0&&!L&&n===0&&e.jsx("p",{className:"btn",onClick:()=>!x&&I(1),children:x?"Deleting...":"Delete List"}),n===0&&!x&&S===0&&N&&e.jsx("p",{className:"btn",onClick:()=>!L&&o(1),children:L?"Updating...":"Update List"})]}),(S===1||n===1)&&e.jsx("h4",{children:"Are you Sure?"}),S==1&&e.jsxs("div",{className:"confirm-delete-list",children:[e.jsx("p",{className:"btn",onClick:()=>E(),children:"Yes"}),e.jsx("p",{className:"btn",onClick:()=>I(0),children:"No"})]}),n==1&&e.jsxs("div",{className:"confirm-delete-list",children:[e.jsx("p",{className:"btn",onClick:()=>U(),children:"Yes"}),e.jsx("p",{className:"btn",onClick:()=>o(0),children:"No"})]})]})]})}function P(t){const h=v(i=>i.walletList);return e.jsx("div",{className:"wallet-list-dropdown",children:e.jsx("select",{className:"list-widget-dropdown",name:"edit-wallet-list",id:"edit-wallet-list",onChange:i=>t.selection(i.target.value),children:h.map((i,p)=>e.jsx("option",{value:i.name,children:i.name},"edit-wallet-list-option_"+p))})})}function O(){const t=v(n=>n.walletList),h=v(n=>n.addListToWallet),[i,p]=r.useState({name:t[0].name,count:y(t[0].list)}),[s,g]=r.useState({name:t[0].name,count:y(t[0].list)}),[l,x]=r.useState(0),[a,L]=r.useState(0),[f,N]=r.useState(!1);r.useEffect(()=>{document.getElementById("merge-list-widget-new-listname").value="",document.getElementById("merge-list-widget-addresslist").value="",x(0),L(0)},[i,s]);function y(n){return n.split(`
`).length}function b(){if(i.name===s.name)alert("Error, Same Wallet List!");else{document.getElementById("merge-list-widget-new-listname").value=`${i.name}_${s.name}_Merged`;var n="";t.map(o=>{o.name===i.name&&(n=o.list)}),t.map(o=>{o.name===s.name&&(n+=`
`+o.list)}),document.getElementById("merge-list-widget-addresslist").value=n,x(n.split(`
`).length)}}function D(){if(i.name===s.name)alert("Error, Same Wallet List!");else{document.getElementById("merge-list-widget-new-listname").value=`${i.name}_${s.name}_Common`;var n=[];t.map(w=>{w.name===i.name&&(n=w.list.split(`
`))});var o=[];t.map(w=>{w.name===s.name&&(o=w.list.split(`
`))});const j=n.filter(w=>o.includes(w));var d="";j.map((w,E)=>E===0?d+=w:d+=`
`+w),document.getElementById("merge-list-widget-addresslist").value=d,x(j.length)}}function S(){N(!0),L(0);const o=document.getElementById("merge-list-widget-addresslist").value.trim().split(`
`).map(j=>j.trim()).filter(j=>j.trim()!="");var d=0;o.map(j=>{!W(j)&&(d+=1)}),d>0?alert("Invalid Address Found!"):I(document.getElementById("merge-list-widget-new-listname").value,o)}function I(n,o){fetch("https://cryptowallettracker.onrender.com/api/add-wallets-list",{method:"POST",body:JSON.stringify({listName:n,walletList:o}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(d=>d.json()).then(d=>{alert(d.message),N(!1),d.response!=null&&h({id:d.response.records[0].id,name:d.response.records[0].fields["List Name"],list:d.response.records[0].fields["Holders List"]})}).catch(d=>{console.log(d.message)})}return e.jsxs("div",{className:"widget-container",children:[e.jsx("h3",{children:"Merge Wallets List"}),e.jsxs("div",{className:"merge-list-top",children:[e.jsxs("div",{className:"merge-list-labels",children:[e.jsx("h4",{children:"Select List"}),e.jsxs("h4",{children:["Wallets: ",i.count]})]}),e.jsx(B,{widgetID:"merge-wallet-list-one",selection:p}),e.jsxs("div",{className:"merge-list-labels",children:[e.jsx("h4",{children:"Select List"}),e.jsxs("h4",{children:["Wallets: ",s.count]})]}),e.jsx(B,{widgetID:"merge-wallet-list-two",selection:g}),e.jsxs("div",{className:"merge-list-btn-container",children:[e.jsx("p",{className:"btn",onClick:()=>b(),children:"Merge"}),e.jsx("p",{className:"btn",onClick:()=>D(),children:"Intersect"})]})]}),e.jsxs("div",{className:"merge-list-new-list",children:[e.jsxs("div",{className:"merge-list-address-header",children:[e.jsx("h4",{children:"Merged List"}),e.jsxs("h4",{children:["Wallets: ",l]})]}),e.jsx("input",{className:"list-widget-input",type:"text",name:"merge-list-widget-new-listname",id:"merge-list-widget-new-listname"}),e.jsx("textarea",{className:"list-widget-textarea",name:"merge-list-widget-addresslist",id:"merge-list-widget-addresslist"}),e.jsxs("div",{className:"merge-list-footer-btn-container",children:[l>0&&a===0&&e.jsx("p",{className:"btn",onClick:()=>L(1),children:f?"Saving...":"Save List"}),a===1&&e.jsx("p",{className:"btn",onClick:()=>S(),children:"Sure, Save List"}),a===1&&e.jsx("p",{className:"btn",onClick:()=>L(0),children:"Don't Save"})]})]})]})}function B(t){const h=v(s=>s.walletList),[i,p]=r.useState("");return e.jsx("div",{className:"wallet-list-dropdown",children:e.jsx("select",{value:i,className:"list-widget-dropdown",name:t.widgetID,id:t.widgetID,onChange:s=>{h.map(g=>{g.name===s.target.value&&t.selection({name:s.target.value,count:g.list.split(`
`).length})}),p(s.target.value)},children:h.map((s,g)=>e.jsx("option",{value:s.name,children:s.name},t.widgetID+"-option_"+g))})})}function $(){const t=["Create","Edit","Merge"],[h,i]=r.useState(0),p=v(g=>g.isLoading);function s(){switch(h){case 1:return e.jsx(M,{});case 2:return e.jsx(O,{});default:return e.jsx(F,{})}}return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"List Tools"}),e.jsxs("div",{className:"list-mod-tools-container",children:[e.jsx("div",{className:"list-mod-left-pane",children:t.map((g,l)=>e.jsx("p",{className:h===l?"list-mod-menu-items-selected":"list-mod-menu-items-unselected",onClick:()=>i(l),children:g},"list-tool-submenu_"+l))}),e.jsx("div",{className:"list-mod-right-pane",children:p?e.jsx("h3",{children:"Updating List Data..."}):s()})]})]})}export{$ as default};
